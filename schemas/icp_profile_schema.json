{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "ICP Profile Metrics",
  "description": "Schema for ICP-aligned benchmark profile analysis output",
  "type": "object",
  "required": ["profile_id", "profile_label", "report_title", "suites_evaluated", "metrics", "thresholds"],
  "properties": {
    "profile_id": {
      "type": "string",
      "description": "The profile identifier",
      "enum": ["legacy_modernization", "platform_saas", "security_compliance", "ai_forward", "platform_consolidation"]
    },
    "profile_label": {
      "type": "string",
      "description": "Human-readable profile label"
    },
    "report_title": {
      "type": "string",
      "description": "Profile-specific report title (e.g., 'Modernization Readiness Report')"
    },
    "suites_evaluated": {
      "type": "array",
      "items": {"type": "string"},
      "description": "Benchmark suites included in this profile's analysis"
    },
    "headline": {
      "type": ["string", "null"],
      "description": "Data-driven headline metric for the profile"
    },
    "metrics": {
      "type": "object",
      "description": "Profile-filtered metrics from sub-reports",
      "properties": {
        "workflow_deltas": {
          "type": "object",
          "description": "Time savings per workflow category (profile-filtered)"
        },
        "navigation_summary": {
          "type": "object",
          "description": "Navigation metrics by configuration"
        },
        "n_workflow_tasks": {
          "type": "integer",
          "description": "Number of workflow tasks in profile suites"
        },
        "economic_summary": {
          "type": "object",
          "description": "Per-config economic metrics for profile suites"
        },
        "reliability_per_suite": {
          "type": "object",
          "description": "Per-suite reliability stats (profile-filtered)"
        },
        "reliability_floor": {
          "type": "object",
          "description": "Reliability floor per config"
        },
        "failure_clusters": {
          "type": "array",
          "description": "Failure clusters relevant to profile suites"
        },
        "failure_summary": {
          "type": "object",
          "description": "Aggregated failure analysis for profile suites",
          "properties": {
            "n_failures": {"type": "integer"},
            "failure_modes": {"type": "object"},
            "context_impact": {"type": "object"}
          }
        },
        "governance": {
          "type": ["object", "null"],
          "description": "Governance report data (security_compliance profile only)"
        }
      }
    },
    "thresholds": {
      "type": "object",
      "description": "Success threshold evaluation results",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "target": {"description": "The target threshold value"},
          "actual": {"description": "The measured value, or null if not yet computed"},
          "met": {"type": ["boolean", "null"], "description": "Whether the threshold was met"}
        }
      }
    }
  },
  "examples": [
    {
      "profile_id": "legacy_modernization",
      "profile_label": "Legacy Enterprise Modernization",
      "report_title": "Modernization Readiness Report",
      "suites_evaluated": ["ccb_crossrepo", "ccb_dependeval", "ccb_largerepo", "ccb_locobench"],
      "headline": "Context infrastructure improves legacy codebase task success by 14% (89% vs 78% across 55 tasks)",
      "metrics": {
        "n_workflow_tasks": 55,
        "economic_summary": {
          "baseline": {"n_tasks": 55, "avg_cost_usd": 2.58, "pass_rate": 0.782},
          "sourcegraph_full": {"n_tasks": 55, "avg_cost_usd": 4.34, "pass_rate": 0.891}
        }
      },
      "thresholds": {
        "comprehension_time_reduction_pct": {"target": 30, "actual": 25.3, "met": false},
        "cross_repo_pass_rate_min": {"target": 0.50, "actual": 0.387, "met": false}
      }
    }
  ]
}
