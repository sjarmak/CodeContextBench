{
  "task_id": "inv-migration-001",
  "description": "ADMINS/MANAGERS Settings Format Migration Audit",
  "weights": {
    "required_findings": 0.40,
    "file_references": 0.30,
    "causal_chain": 0.20,
    "negative_checks": 0.10
  },
  "required_findings": [
    {
      "id": "f1",
      "description": "Identifies _send_server_message function",
      "patterns": ["_send_server_message"],
      "weight": 0.25
    },
    {
      "id": "f2",
      "description": "Identifies mail_admins or mail_managers function",
      "patterns": ["mail_admins|mail_managers"],
      "weight": 0.25
    },
    {
      "id": "f3",
      "description": "Mentions tuple unpacking (name, email) or a[1] as pattern to change",
      "patterns": ["\\(name,? email\\)|tuple.*unpack|a\\[1\\]|for.*name.*email.*in"],
      "weight": 0.25
    },
    {
      "id": "f4",
      "description": "Mentions ImproperlyConfigured or error type change",
      "patterns": ["ImproperlyConfigured|error.*type.*change|ValueError"],
      "weight": 0.25
    }
  ],
  "file_references": [
    {
      "id": "r1",
      "description": "Identifies django/core/mail/__init__.py",
      "patterns": ["django/core/mail/__init__\\.py", "django/core/mail/", "core/mail/__init__"],
      "weight": 0.25
    },
    {
      "id": "r2",
      "description": "Identifies docs/ref/settings.txt",
      "patterns": ["docs/ref/settings\\.txt", "ref/settings"],
      "weight": 0.15
    },
    {
      "id": "r3",
      "description": "Identifies tests/mail/tests.py",
      "patterns": ["tests/mail/tests\\.py", "tests/mail/"],
      "weight": 0.25
    },
    {
      "id": "r4",
      "description": "Identifies tests/logging_tests/tests.py",
      "patterns": ["tests/logging_tests", "logging_tests/tests"],
      "weight": 0.15
    },
    {
      "id": "r5",
      "description": "Identifies at least one more test file (middleware or view_tests)",
      "patterns": ["tests/middleware", "tests/view_tests", "test_debug\\.py", "test_sendtestemail"],
      "weight": 0.20
    }
  ],
  "causal_chain": [
    {
      "id": "c1",
      "description": "Settings format change breaks tuple unpacking in _send_server_message causing to= argument to fail and error notifications lost",
      "patterns": ["format.*change|tuple.*string|settings.*change", "_send_server_message|unpack|to=|recipient", "fail|break|lost|error"],
      "ordered": true,
      "weight": 0.50
    },
    {
      "id": "c2",
      "description": "Provides migration checklist with at least 4 specific files and changes",
      "patterns": ["checklist|migration.*plan|files.*need.*change|changes.*needed"],
      "ordered": false,
      "weight": 0.50
    }
  ],
  "negative_checks": [
    {
      "id": "n1",
      "description": "Does NOT only mention settings.py (must find framework-internal consumers)",
      "patterns": ["only.*settings\\.py|settings\\.py.*only.*file"],
      "must_be_absent": true,
      "weight": 1.0
    }
  ]
}
