{
  "task_id": "inv-impact-001",
  "description": "DRA AllocationMode API Change Impact Analysis",
  "weights": {
    "required_findings": 0.40,
    "file_references": 0.30,
    "causal_chain": 0.20,
    "negative_checks": 0.10
  },
  "required_findings": [
    {
      "id": "f1",
      "description": "Identifies dynamicresources plugin/package",
      "patterns": ["dynamicresources", "dynamic.?resource"],
      "weight": 0.20
    },
    {
      "id": "f2",
      "description": "Mentions AllocationMode enum/constant",
      "patterns": ["AllocationMode"],
      "weight": 0.20
    },
    {
      "id": "f3",
      "description": "Mentions scheduler Filter or Score functions",
      "patterns": ["Filter|Score|PreFilter|PostFilter"],
      "weight": 0.20
    },
    {
      "id": "f4",
      "description": "Mentions kubelet device manager or resource claim",
      "patterns": ["kubelet|device.?manager|[Rr]esource[Cc]laim|DeviceClass"],
      "weight": 0.20
    },
    {
      "id": "f5",
      "description": "Mentions performance/latency concern",
      "patterns": ["performance|latency|hot.?path|overhead|regression"],
      "weight": 0.20
    }
  ],
  "file_references": [
    {
      "id": "r1",
      "description": "Identifies file in scheduler dynamicresources plugin",
      "patterns": ["pkg/scheduler/framework/plugins/dynamicresources", "dynamicresources/"],
      "weight": 0.25
    },
    {
      "id": "r2",
      "description": "Identifies DRA API types in staging/ or api/resource/",
      "patterns": ["staging/.*resource", "api/resource", "k8s\\.io/dynamic-resource-allocation"],
      "weight": 0.25
    },
    {
      "id": "r3",
      "description": "Identifies at least one test file",
      "patterns": ["_test\\.go", "test.*allocat", "allocator.*test"],
      "weight": 0.25
    },
    {
      "id": "r4",
      "description": "Identifies kubelet-side code",
      "patterns": ["pkg/kubelet", "kubelet/"],
      "weight": 0.25
    }
  ],
  "causal_chain": [
    {
      "id": "c1",
      "description": "Allocation mode change expands pool scope leading to more candidates and scheduler load",
      "patterns": ["[Aa]llocation.*[Mm]ode|pool.*scope", "multi.?node|cross.?node|expand", "scheduler|candidate|load|performance"],
      "ordered": true,
      "weight": 0.50
    },
    {
      "id": "c2",
      "description": "Mentions risk of double allocation or race condition",
      "patterns": ["double.*alloc|race|concurrent|conflict|contention"],
      "ordered": false,
      "weight": 0.50
    }
  ],
  "negative_checks": [
    {
      "id": "n1",
      "description": "Does NOT confuse DRA with CSI storage",
      "patterns": ["CSI.*cause|CSI.*root|storage.*class.*bug|PersistentVolume.*root.?cause"],
      "must_be_absent": true,
      "weight": 1.0
    }
  ]
}
