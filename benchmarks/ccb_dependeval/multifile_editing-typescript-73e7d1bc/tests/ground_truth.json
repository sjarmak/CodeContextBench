{
  "file_1": "//Modify\nimport { PortWasRenamedEvent } from './events/PortWasRenamedEvent'\n\nstatic commit (state: Port, event: PortWasCreatedEvent): Port {\n    state.id = event.data.id\n    state.name = event.data.name\n    state.dockedShips = event.data.dockedShips.map((shipId) => new ObjectId(shipId))\n    state.createdAt = event.timestamp\n    state.createdBy = event.user\n    state.updatedAt = event.timestamp\n    state.updatedBy = event.user\n    return state\n  }\n\n//New\nrename (newName: string, user: string): Port {\n    this.pushNewEvents([new PortWasRenamedEvent({ newName }, user)])\n    return this\n  }",
  "file_2": "//Modify\nimport { PortWasRenamedEvent } from './events/PortWasRenamedEvent'\n\nconstructor () {\n    super({\n      [PortWasCreatedEvent.eventName]: PortWasCreatedEvent.commit,\n      [ShipUndockedEvent.eventName]: ShipUndockedEvent.commit,\n      [ShipDockedEvent.eventName]: ShipDockedEvent.commit,\n      [PortWasDeletedEvent.eventName]: PortWasDeletedEvent.commit,\n      [PortWasRenamedEvent.eventName]: PortWasRenamedEvent.commit\n    })\n  }",
  "file_3": "//Modify\nget state () {\n    const currentState = this.reducer.reduce(new Port(), [\n      ...this.persistedEvents,\n      ...this.pendingEvents\n    ])\n\n    return {\n      id: currentState.id,\n      name: currentState.name,\n      dockedShips: currentState.dockedShips,\n      createdAt: currentState.createdAt,\n      createdBy: currentState.createdBy,\n      updatedAt: currentState.updatedAt,\n      updatedBy: currentState.updatedBy,\n      deletedAt: currentState.deletedAt,\n      deletedBy: currentState.deletedBy\n    }\n  }",
  "file_4": "//New\nexport class PortWasRenamedEvent extends Event<{ newName: string }> {\n  static readonly eventName = 'port-was-renamed'\n  readonly user: string\n\n  constructor (data: { newName: string }, user: string) {\n    super(PortWasRenamedEvent.eventName, data)\n    this.user = user\n  }\n\n  static commit (state: Port, event: PortWasRenamedEvent): Port {\n    state.name = event.data.newName\n    state.updatedAt = event.timestamp\n    state.updatedBy = event.user\n    return state\n  }\n}"
}
